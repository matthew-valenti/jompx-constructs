"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AuroraServerlessDatasSource = void 0;
const cdk = require("aws-cdk-lib");
const lambda = require("aws-cdk-lib/aws-lambda");
const lambdanjs = require("aws-cdk-lib/aws-lambda-nodejs");
/**
 * NodeJS Lambda. Temporarily here for reference.
 * https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_lambda_nodejs-readme.html
 *
 * TypeScript Decorators
 * https://www.typescriptlang.org/docs/handbook/decorators.html
 */
class AuroraServerlessDatasSource {
    constructor(scope, graphqlApi) {
        const lambdaFunction = new lambdanjs.NodejsFunction(scope, 'handler', {
            runtime: lambda.Runtime.NODEJS_14_X,
            timeout: cdk.Duration.seconds(30),
            memorySize: 128,
            bundling: {
                minify: true,
                sourceMap: true
            }
        });
        this.dataSource = graphqlApi.addLambdaDataSource('AuroraServerlessDatasSource', lambdaFunction);
    }
}
exports.AuroraServerlessDatasSource = AuroraServerlessDatasSource;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXVyb3JhLXNlcnZlcmxlc3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY2xhc3Nlcy9hcHAtc3luYy9kYXRhc291cmNlcy9hdXJvcmEtc2VydmVybGVzcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFFQSxtQ0FBbUM7QUFDbkMsaURBQWlEO0FBQ2pELDJEQUEyRDtBQUczRDs7Ozs7O0dBTUc7QUFDSCxNQUFhLDJCQUEyQjtJQUlwQyxZQUNJLEtBQWdCLEVBQ2hCLFVBQThCO1FBRTlCLE1BQU0sY0FBYyxHQUFHLElBQUksU0FBUyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFO1lBQ2xFLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVc7WUFDbkMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztZQUNqQyxVQUFVLEVBQUUsR0FBRztZQUNmLFFBQVEsRUFBRTtnQkFDTixNQUFNLEVBQUUsSUFBSTtnQkFDWixTQUFTLEVBQUUsSUFBSTthQUNsQjtTQUNKLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDLG1CQUFtQixDQUFDLDZCQUE2QixFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBQ3BHLENBQUM7Q0FDSjtBQXBCRCxrRUFvQkMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLWV4dHJhbmVvdXMtZGVwZW5kZW5jaWVzXHJcbmltcG9ydCAqIGFzIGFwcHN5bmMgZnJvbSAnQGF3cy1jZGsvYXdzLWFwcHN5bmMtYWxwaGEnO1xyXG5pbXBvcnQgKiBhcyBjZGsgZnJvbSAnYXdzLWNkay1saWInO1xyXG5pbXBvcnQgKiBhcyBsYW1iZGEgZnJvbSAnYXdzLWNkay1saWIvYXdzLWxhbWJkYSc7XHJcbmltcG9ydCAqIGFzIGxhbWJkYW5qcyBmcm9tICdhd3MtY2RrLWxpYi9hd3MtbGFtYmRhLW5vZGVqcyc7XHJcbmltcG9ydCB7IENvbnN0cnVjdCB9IGZyb20gJ2NvbnN0cnVjdHMnO1xyXG5cclxuLyoqXHJcbiAqIE5vZGVKUyBMYW1iZGEuIFRlbXBvcmFyaWx5IGhlcmUgZm9yIHJlZmVyZW5jZS5cclxuICogaHR0cHM6Ly9kb2NzLmF3cy5hbWF6b24uY29tL2Nkay9hcGkvdjIvZG9jcy9hd3MtY2RrLWxpYi5hd3NfbGFtYmRhX25vZGVqcy1yZWFkbWUuaHRtbFxyXG4gKlxyXG4gKiBUeXBlU2NyaXB0IERlY29yYXRvcnNcclxuICogaHR0cHM6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL2RvY3MvaGFuZGJvb2svZGVjb3JhdG9ycy5odG1sXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQXVyb3JhU2VydmVybGVzc0RhdGFzU291cmNlIHtcclxuXHJcbiAgICBwdWJsaWMgZGF0YVNvdXJjZTogYXBwc3luYy5MYW1iZGFEYXRhU291cmNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHNjb3BlOiBDb25zdHJ1Y3QsXHJcbiAgICAgICAgZ3JhcGhxbEFwaTogYXBwc3luYy5HcmFwaHFsQXBpXHJcbiAgICApIHtcclxuICAgICAgICBjb25zdCBsYW1iZGFGdW5jdGlvbiA9IG5ldyBsYW1iZGFuanMuTm9kZWpzRnVuY3Rpb24oc2NvcGUsICdoYW5kbGVyJywge1xyXG4gICAgICAgICAgICBydW50aW1lOiBsYW1iZGEuUnVudGltZS5OT0RFSlNfMTRfWCxcclxuICAgICAgICAgICAgdGltZW91dDogY2RrLkR1cmF0aW9uLnNlY29uZHMoMzApLFxyXG4gICAgICAgICAgICBtZW1vcnlTaXplOiAxMjgsXHJcbiAgICAgICAgICAgIGJ1bmRsaW5nOiB7XHJcbiAgICAgICAgICAgICAgICBtaW5pZnk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VNYXA6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGFTb3VyY2UgPSBncmFwaHFsQXBpLmFkZExhbWJkYURhdGFTb3VyY2UoJ0F1cm9yYVNlcnZlcmxlc3NEYXRhc1NvdXJjZScsIGxhbWJkYUZ1bmN0aW9uKTtcclxuICAgIH1cclxufSJdfQ==