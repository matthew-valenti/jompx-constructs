"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppSyncResolver = void 0;
// eslint-disable-next-line @typescript-eslint/no-require-imports
const get = require("get-value");
class AppSyncResolver {
    /**
     * Call a method on a class from values in a AppSync Lambda event.
     * @param classInstance - A class instance.
     * @param event - AppSync Lambda event.
     * @param path - JSON path to method arguments in event.arguments.
     * @returns - Returns the return value of the method.
     */
    static CallMethodFromEvent(classInstance, event, path = 'input') {
        const eventArguments = get(event.arguments, path, { default: [] });
        return Reflect.apply(classInstance[event.stash.operation], undefined, [...Object.values(eventArguments), ...[event]]);
    }
}
exports.AppSyncResolver = AppSyncResolver;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLXN5bmMtcmVzb2x2ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYXBwLXN5bmMvYXBwLXN5bmMtcmVzb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsaUVBQWlFO0FBQ2pFLGlDQUFrQztBQUdsQyxNQUFhLGVBQWU7SUFDeEI7Ozs7OztPQU1HO0lBQ0ksTUFBTSxDQUFDLG1CQUFtQixDQUFJLGFBQWtCLEVBQUUsS0FBNEIsRUFBRSxPQUFlLE9BQU87UUFDekcsTUFBTSxjQUFjLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDbkUsT0FBTyxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLFNBQW9CLENBQUMsRUFBRSxTQUFTLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUUsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNySSxDQUFDO0NBQ0o7QUFaRCwwQ0FZQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tcmVxdWlyZS1pbXBvcnRzXHJcbmltcG9ydCBnZXQgPSByZXF1aXJlKCdnZXQtdmFsdWUnKTtcclxuaW1wb3J0IHsgSUFwcFN5bmNSZXNvbHZlckV2ZW50IH0gZnJvbSAnLi9hcHAtc3luYy50eXBlcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwU3luY1Jlc29sdmVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ2FsbCBhIG1ldGhvZCBvbiBhIGNsYXNzIGZyb20gdmFsdWVzIGluIGEgQXBwU3luYyBMYW1iZGEgZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gY2xhc3NJbnN0YW5jZSAtIEEgY2xhc3MgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBBcHBTeW5jIExhbWJkYSBldmVudC5cclxuICAgICAqIEBwYXJhbSBwYXRoIC0gSlNPTiBwYXRoIHRvIG1ldGhvZCBhcmd1bWVudHMgaW4gZXZlbnQuYXJndW1lbnRzLlxyXG4gICAgICogQHJldHVybnMgLSBSZXR1cm5zIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIG1ldGhvZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBDYWxsTWV0aG9kRnJvbUV2ZW50PFQ+KGNsYXNzSW5zdGFuY2U6IGFueSwgZXZlbnQ6IElBcHBTeW5jUmVzb2x2ZXJFdmVudCwgcGF0aDogc3RyaW5nID0gJ2lucHV0Jyk6IGFueSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRBcmd1bWVudHMgPSBnZXQoZXZlbnQuYXJndW1lbnRzLCBwYXRoLCB7IGRlZmF1bHQ6IFtdIH0pO1xyXG4gICAgICAgIHJldHVybiBSZWZsZWN0LmFwcGx5KGNsYXNzSW5zdGFuY2VbZXZlbnQuc3Rhc2gub3BlcmF0aW9uIGFzIGtleW9mIFRdLCB1bmRlZmluZWQsIFsuLi5PYmplY3QudmFsdWVzKGV2ZW50QXJndW1lbnRzKSwgLi4uW2V2ZW50XV0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==